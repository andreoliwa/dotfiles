- name: "personal: Copy .mrconfig"
  ansible.builtin.copy:
    src: "{{ role_path }}/files/vault.mrconfig"
    dest: ~/.mrconfig
    mode: "0600"

- name: "personal: Checkout repos"
  ansible.builtin.command: "mr checkout"
  args:
    chdir: ~/
  register: mr_checkout
  ignore_errors: true
- debug: var=mr_checkout.stdout

- name: "Create dontforget dir"
  file:
    state: directory
    path: ~/Library/Application Support/dontforget

- name: "personal: Link dontforget dir"
  file:
    src: ~/Dropbox/Apps/dontforget/config.yaml
    dest: ~/Library/Application Support/dontforget/config.yaml
    state: link

- name: "personal: Create Node-RED flows directory"
  file:
    state: directory
    path: "{{ dotfiles_home }}/roles/node-red/var/config"

- name: "personal: Copy Node-RED flows"
  ansible.builtin.copy:
    src: "{{ role_path }}/files/vault-node-red-flows.json"
    dest: "{{ dotfiles_home }}/roles/node-red/var/config/node-red-flows.json"
  ignore_errors: true
