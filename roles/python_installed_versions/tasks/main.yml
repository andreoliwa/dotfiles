- name: "Get installed versions of Python"
  ansible.builtin.shell: "{{ pyenv_root }}/bin/pyenv versions --bare"
  register: python_installed_versions_pyenv_versions_result
  changed_when: false

- name: "Set pyenv versions variable"
  ansible.builtin.set_fact:
    python_installed_versions_pyenv_versions: "{{ python_installed_versions_pyenv_versions_result.stdout }}"

- name: "Get latest installed version of Python 3.14"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.14.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_14
  changed_when: false

- name: "Get latest installed version of Python 3.13"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.13.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_13
  changed_when: false

- name: "Get latest installed version of Python 3.12"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.12.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_12
  changed_when: false

- name: "Get latest installed version of Python 3.11"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.11.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_11
  changed_when: false

- name: "Get latest installed version of Python 3.10"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.10.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_10
  changed_when: false

- name: "Get latest installed version of Python 3.9"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^3.9.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_3_9
  changed_when: false

- name: "Get latest installed version of Python 2.7"
  ansible.builtin.shell: "set -o pipefail && echo {{ python_installed_versions_pyenv_versions }} | egrep -i '^2.7.[0-9]+$' | tail -n 1"
  register: python_installed_versions_latest_python_2_7
  changed_when: false
