- name: "pipx: Install with brew"
  homebrew: name=pipx state=latest
  when: ansible_os_family == "Darwin"

- name: "pipx: Install from GitHub https://github.com/pipxproject/pipx#install-pipx"
  command: "python3 -m pip install -U --user pipx"
  register: this_task
  changed_when: "'Requirement already up-to-date: pipx' not in this_task.stdout"
  when: ansible_os_family == "Debian"

- name: "pipx: Ensure it's on $PATH"
  command: "pipx ensurepath"
  register: this_task
  changed_when: "'is already in PATH' not in this_task.stderr"

- name: "pipx: Install Python 3 modules globally with pipx"
  with_items: "{{ python3_modules }}"
  command: "pipx install --verbose {{ item }}"
  ignore_errors: yes
